<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시글 수정</title>
</head>
<body>
<h2>게시글 수정</h2>
<form th:action="@{/api/posts/modify}" method="post" enctype="multipart/form-data">

    <!-- postId와 userId를 hidden input으로 포함하여 전송 -->
    <input type="hidden" name="postId" th:value="${post.id}">
    <input type="hidden" name="userId" th:value="${user.id}">

    <!-- 게시판 선택 -->
    <div>
        <label for="board">게시판 선택:</label>
        <select id="board" name="boardId" required>
            <option value="" disabled>게시판을 선택하세요</option>
            <option th:each="board : ${boards}"
                    th:value="${board.id}"
                    th:text="${board.name}"
                    th:selected="${board.id == post.boardId}">게시판 이름
            </option>
        </select>
    </div>
    <br>

    <!-- 제목 입력 -->
    <div>
        <label for="title">제목:</label>
        <input type="text" id="title" name="title" th:value="${post.title}" required>
    </div>
    <br>

    <!-- 내용 입력 -->
    <div>
        <label for="content">내용:</label>
        <textarea id="content" name="content" rows="10" required th:text="${post.content}"></textarea>
    </div>
    <br>

    <!-- 이미지 업로드 -->
    <div>
        <label for="uploadFiles">이미지 업로드:</label>
        <input type="file" id="uploadFiles" name="uploadFiles">
        <!-- 기존 이미지가 있다면 표시 -->
        <div th:if="${post.imagePath}">
            <p>현재 이미지:</p>
            <img th:src="${post.imagePath}" alt="현재 이미지" style="max-width: 300px; max-height: 300px;">
            <input type="checkbox" name="deleteImage" value="true"> 기존 이미지 삭제
        </div>
    </div>
    <br>

    <!-- 등록 및 취소 버튼 -->
    <div>
        <button type="submit">수정</button>
        <button type="button" onclick="window.history.back()">취소</button>
    </div>
</form>
</body>
</html>
